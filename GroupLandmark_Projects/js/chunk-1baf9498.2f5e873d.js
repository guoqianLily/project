(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1baf9498"],{"322b":function(e,t,a){var r=a("c0f4");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("85cb").default;s("b1b5c2fc",r,!0,{sourceMap:!1,shadowMode:!1})},"54d0":function(e,t,a){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){return r(e)||s(e)||n()}a.d(t,"a",(function(){return l}))},"759b":function(e,t,a){"use strict";var r=a("322b"),s=a.n(r);s.a},"9e76":function(e,t,a){"use strict";var r=a("69b3"),s=a("eafa"),n=a("e754"),l=a("7108");a("0aed")("match",1,(function(e,t,a,o){return[function(a){var r=e(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=o(a,e,this);if(t.done)return t.value;var i=r(e),u=String(this);if(!i.global)return l(i,u);var c=i.unicode;i.lastIndex=0;var d,m=[],p=0;while(null!==(d=l(i,u))){var f=String(d[0]);m[p]=f,""===f&&(i.lastIndex=n(u,s(i.lastIndex),c)),p++}return 0===p?null:m}]}))},c0f4:function(e,t,a){var r=a("abd8");t=r(!1),t.push([e.i,".userManageBox .postButtons{width:100%;height:30px;padding:5px 10px;border-bottom:1px solid #ebeef5}.userManageBox .postButtons .el-input{width:12%}.userManageBox .postButtons .el-input .el-input__inner{height:28px}.userManageBox .postButtons .el-button--mini,.userManageBox .postButtons .el-button--mini.is-round{padding:6px;margin-left:10px}.userManageBox .postTable,.userManageBox .postTable .el-button--mini,.userManageBox .postTable .el-button--mini.is-round{padding:6px}.userManageBox .el-table th.gutter{display:table-cell!important}.userManageBox #userDialog .el-dialog__body{padding:5px 30px}.userManageBox #userDialog .el-transfer-panel{width:39%}.userManageBox #userDialog .el-transfer-panel__item.el-checkbox{width:90%}.userManageBox #userDialog .el-transfer-panel__filter{margin:5px 15px;line-height:1.2}.userManageBox #userDialog .el-transfer-panel__filter .el-input__inner{height:28px}.userManageBox #userDialog .el-transfer-panel__filter .el-input__icon{line-height:28px}.userManageBox #userDialog .el-checkbox{margin-right:0}.userManageBox #userDialog .el-tab-paneFour .el-form{width:288px!important}.userManageBox #userDialog .el-input--suffix .el-input__inner{padding-right:15px}.userManageBox .el-form-item{min-width:45%}",""]),e.exports=t},e34d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"userManageBox",staticStyle:{width:"100%",height:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 1)"}},[a("div",{staticClass:"postButtons"},[a("label",[e._v("用户:")]),a("el-input",{attrs:{placeholder:"编号/姓名"},model:{value:e.userSearchStr,callback:function(t){e.userSearchStr=t},expression:"userSearchStr"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(t){e.userNameLike=e.userSearchStr}}},[e._v("查询")]),e._l(e.allBtns,(function(t,r){return a("el-button",{key:r,attrs:{type:"primary",icon:"el-icon-circle-plus",size:"mini"},on:{click:function(a){return e.toggle(t.name)}}},[e._v(e._s(t.value))])}))],2),a("div",{staticClass:"postTable"},[a("el-table",{attrs:{data:e.tableDataFilter,height:e.heightItem,"max-height":e.heightItem,border:"","header-cell-style":{padding:"8px 0"},"cell-style":{padding:"5px 0"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"userCode",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"userName",label:"用户姓名"}}),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),a("el-table-column",{attrs:{label:"是否有效"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("1"==t.row.enabled?"有效":"无效"))])]}}])}),e.handlesActive?a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                    ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                    ")])]}}],null,!1,3480035104)}):e._e()],1),a("el-dialog",{attrs:{title:"增加用户信息",visible:e.dialogFormVisible,"close-on-click-modal":!1,id:"userDialog"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelHandel}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{"min-height":"200px"},attrs:{label:"基本信息",name:"first"}},[a("el-form",{ref:"userManageFormLog",attrs:{"label-position":e.labelPosition,inline:!0,model:e.form,size:"small","label-width":"100px",rules:e.rulesForm}},[a("el-form-item",{attrs:{label:"用户编号",prop:"userCode",width:"200"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.userCode,callback:function(t){e.$set(e.form,"userCode",t)},expression:"form.userCode"}})],1),a("el-form-item",{attrs:{label:"用户姓名",prop:"userName",width:"200"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e.passwordFlag?a("el-form-item",{attrs:{label:"用户密码",prop:"password",width:"200"}},[a("el-input",{attrs:{"auto-complete":"new-password",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),a("el-form-item",{attrs:{label:"手机号",prop:"mobile",width:"200"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"是否有效",prop:"enabled"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}},[a("el-option",{attrs:{label:"有效",value:"1"}}),a("el-option",{attrs:{label:"无效",value:"0"}})],1)],1)],1)],1),a("el-tab-pane",{staticStyle:{"min-height":"200px"},attrs:{label:"角色权限",name:"second"}},[a("el-transfer",{attrs:{props:{key:"id",label:"roleName"},titles:["选择角色","已选角色"],data:e.transferDataRloe},model:{value:e.Rloevalue,callback:function(t){e.Rloevalue=t},expression:"Rloevalue"}})],1),a("el-tab-pane",{staticStyle:{"min-height":"200px"},attrs:{label:"岗位权限",name:"third"}},[a("el-transfer",{ref:"Depvalue",attrs:{filterable:"",titles:["选择岗位","已选岗位"],data:e.transferDataDep},model:{value:e.Depvalue,callback:function(t){e.Depvalue=t},expression:"Depvalue"}})],1),e.elTabFour?a("el-tab-pane",{staticClass:"el-tab-paneFour",staticStyle:{"min-height":"200px"},attrs:{label:"密码重置",name:"four"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{size:"small",model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"密码",prop:"pass",width:"200"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass",width:"200"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1)],1)],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelHandel}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("userManageFormLog")}}},[e._v("确 定")])],1)],1)],1)])},s=[],n=(a("5ab2"),a("6d57"),a("e10e"),a("54d0")),l=(a("cc57"),a("9e76"),a("ac9f")),o=a("6e72"),i=a("8876");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),r())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.ruleForm.pass?r(new Error("两次输入密码不一致!")):r()},r=function(t,a,r){if(!a)return r(new Error("编码不能为空！"));e.oldKey!=a&&Object(o["u"])(e.updateIndex,e.form.userCode).then((function(e){return e?r():r(new Error("编码已存在！"))}))};return{loading:!0,userNameLike:"",userSearchStr:"",minBtns:["Add"],allBtns:[],departmantId:"",tableData:[],heightItem:window.innerHeight-150,handlesActive:!0,form:{},dialogFormVisible:!1,formIndex:-1,oldform:{},dataModel:[],timer:!1,updateIndex:"",passwordFlag:!0,activeName:"first",labelPosition:"right",transferDataRloe:[],Rloevalue:[],transferDataDep:[],Depvalue:[],AdduserId:"",ruleForm:{pass:"",checkPass:""},rules:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}]},rulesForm:{userCode:[{validator:r,trigger:"blur"}],userName:[{required:!0,message:"请输入用户姓名",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"}]},elTabFour:!1}},computed:c({},Object(i["b"])({btns:function(e){return e.btns},userId:function(e){return e.user.userId}}),{tableDataFilter:{get:function(){var e=this;return this.tableData.filter((function(t){return t.userName.match(e.userNameLike)||t.userCode.match(e.userNameLike)}))}}}),watch:{heightItem:function(e){if(!this.timer){this.heightItem=e,this.timer=!0;var t=this;setTimeout((function(){t.timer=!1}),400)}}},created:function(){var e=this;this.btns.map((function(t,a){-1!=e.minBtns.indexOf(t.name)&&e.allBtns.push({name:t.name,value:t.value})})),this.$center.$on("user-event",(function(t){t!=e.departmantId&&(e.departmantId=t,Object(o["q"])(e.departmantId).then((function(t){t.success?(e.tableData=t.result,e.loading=!1):(e.loading=!1,e.$message({type:"error",message:"加载失败!"}))})))})),Object(o["p"])().then((function(t){t.result.map((function(t,a){"1"==t.enabled&&e.transferDataRloe.push(t)}))})),Object(o["s"])("").then((function(t){t.result.map((function(t,a){"1"==t.enabled&&e.transferDataDep.push({key:t.id,label:t.departmantName+"-"+t.titleName+"("+t.hierarchy+")"})}))}))},methods:{handleClick:function(e,t){"four"==e.name&&this.$refs.ruleForm.resetFields()},toggle:function(e){"Add"==e&&this.addTaskHandle()},addTaskHandle:function(){this.form={userCode:"",userName:"",password:"",mail:"",mobile:"",enabled:"1"},this.Rloevalue=[],this.Depvalue=[],this.dialogFormVisible=!0,this.passwordFlag=!0,this.elTabFour=!1,this.activeName="first",this.updateIndex=""},cancelHandel:function(){for(var e in this.dialogFormVisible=!1,this.activeName="first",this.$refs["userManageFormLog"].resetFields(),this.$refs["Depvalue"].clearQuery("left"),this.$refs["Depvalue"].clearQuery("right"),this.form)this.form[e]=this.oldform[e]},submitForm:function(e){var t=this;this.$refs["Depvalue"].clearQuery("left"),this.$refs["Depvalue"].clearQuery("right");var a=!0;this.$refs[e].validate((function(e){if(t.elTabFour&&(""!=t.ruleForm.pass&&""!=t.ruleForm.checkPass?t.$refs["ruleForm"].validate((function(e){e&&Object(o["v"])(t.updateIndex,t.ruleForm.pass).then((function(e){}))})):""==t.ruleForm.pass&&""==t.ruleForm.checkPass||t.$refs["ruleForm"].validate((function(e){e||(a=!1)}))),!e)return t.$message({type:"error",message:"验证失败!"}),!1;if(t.Depvalue.length>0&&""!=t.form.userName&&""!=t.form.userName){t.updateIndex=t.updateIndex?t.updateIndex:"";var r={id:t.updateIndex,userCode:t.form.userCode,userName:t.form.userName,password:t.form.password,mail:"",mobile:t.form.mobile,enabled:t.form.enabled,userId:t.userId};t.dialogFormVisible=!1,t.form.departmantId=t.departmantId,Object(o["c"])(r).then((function(e){if(e.success){t.AdduserId=e.result;var r=JSON.stringify(Object(n["a"])(t.Rloevalue));Object(o["e"])(t.AdduserId,r).then((function(e){e.success||t.$message({type:"error",message:"用户角色错误，添加失败!"})}));var s=JSON.stringify(Object(n["a"])(t.Depvalue));Object(o["d"])(t.AdduserId,s).then((function(e){e.success?(Object(o["q"])(t.departmantId).then((function(e){t.tableData=e.result})),a?t.$message({type:"success",message:"成功!"}):t.$message({type:"error",message:"密码重置有误!"})):t.$message({type:"error",message:"失败!"})}))}else t.$message({type:"error",message:"添加失败!"})}))}else t.$message({type:"warning",message:"用户信息及岗位不能为空！"})}))},handleEdit:function(e,t){var a=this;this.activeName="first",this.updateIndex=t.id,this.form=t,this.passwordFlag=!1,Object(o["A"])(this.updateIndex).then((function(e){console.log(e.result);var t=a;a.Rloevalue=[],e.result.map((function(e,a){t.Rloevalue.push(e.id)}))})),Object(o["z"])(this.updateIndex).then((function(e){var t=a;console.log(e.result),a.Depvalue=[],e.result.map((function(e,a){t.Depvalue.push(e.id)}))})),this.oldform=c({},t),this.formIndex=e,this.elTabFour=!0,this.ruleForm.pass="",this.ruleForm.checkPass="",this.dialogFormVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["i"])(t.id).then((function(e){e.success?(Object(o["q"])(a.departmantId).then((function(e){a.tableData=e.result})),a.$message({type:"success",message:"删除成功!"})):a.$message({type:"success",message:"删除失败!"})}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))}},mounted:function(){var e=this;window.onresize=function(){return function(){e.heightItem=window.innerHeight-185}()}}},m=d,p=(a("759b"),a("623f")),f=Object(p["a"])(m,r,s,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-1baf9498.2f5e873d.js.map